<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../../assets/css/login/profile.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <title>SpartansMT</title>
    <link rel="icon" type="image/png" sizes="32x32" href="../../assets/image/home/logo icon.png" alt="logo icon">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

</head>


<body>


    <!-- <label id="first_name"><input type="text"></label>
    <label id="last_name"></label>
    <label id="address"></label>
    <label id="email"></label>
    <label id="create_password"></label>
    <label id="confirm_password"></label> -->

    <!-- <h1 id="first_name"></h1>
    <h1 id="last_name"></h1>
    <h1 id="address"></h1>
    <h1 id="email"></h1>
    <h1 id="address"></h1>
    <h1 id="create_password"></h1>
    <h1 id="confirm_password"></h1>
    <button type="button">Submit</button> -->





    <header>

        <nav>
            <ul>
                <a href="../../pages/home/home.html">
                    <li>Home</li>
                </a>
                <li>Profile</li>
                <a href="../../index.html">
                    <li>Logout</li>
                </a>
            </ul>
        </nav>

        <h1>User Profile</h1>

        <form action="">

            <div class="">
                <div>
                    <label for="first_name">First name</label>
                    <br>
                    <input type="text" id="first_name" class="col-12" disabled>
                </div>
                <div>
                    <label for="last_name">Last name</label>
                    <br>
                    <input type="text" id="last_name" class="col-12" disabled>
                </div>
            </div>

            <div>
                <label for="email">Email</label>
                <br>
                <input type="email" id="email" class="col-12" disabled>
            </div>

            <div>
                <label for="address">Address</label>
                <br>
                <input class="col-12" id="address" type="text" disabled>
            </div>

            <div>
                <label for="address2" class="col-12">Address2</label>
                <br>
                <input class="col-12" id="address2" type="text" disabled>
            </div>

            <div class="row">
                <div>
                    <label for="">Country</label>
                    <br>
                    <select name="" id="" class="col-5">
                        <option value=""></option>
                        <option value="">mathan</option>
                        <option value="">ragavan</option>
                        <option value="">achu</option>
                    </select>
                </div>

                <div>
                    <label for="">State</label>
                    <br>
                    <select name="" id="" class="col-4">
                        <option value=""></option>
                        <option value="">Tamilnadu</option>
                        <option value="">TN</option>
                    </select>
                </div>

                <div>
                    <label for="zip_code">Zip</label>
                    <br>
                    <input class="col-3" id="zip_code" type="text" inputmode="numeric" pattern="[0-9]{6,6}" disabled>
                </div>
            </div>

            <div class="btn_flex">
                <button class="btn col-4" id="edit" onclick="editItem()" type="button">Edit Profile</button>
                <button class="btn col-4" id="update" onclick="updateProfile()" type="button">Update Profile</button>
                <button class="btn col-4" onclick="deleteItem()" type="button">Delete Profile</button>

            </div>

        </form>



    </header>






    <script>

        let active_user = JSON.parse(localStorage.getItem('active_user'));
        let users = JSON.parse(localStorage.getItem('arr'));

        document.getElementById("first_name").value = active_user["first_name"];
        document.getElementById("last_name").value = active_user["last_name"];
        document.getElementById("email").value = active_user["user_email"];
        document.getElementById("address").value = active_user["address"];
        document.getElementById("address2").value = active_user["address2"];
        document.getElementById("zip_code").value = active_user["zip_code"];



        function updateProfile() {

            let active_user = JSON.parse(localStorage.getItem('active_user'));

            let users = JSON.parse(localStorage.getItem('arr'));

            users.forEach(e => {
                if (active_user["user_email"] === e["user_email"]) {

                    active_user["first_name"] = document.getElementById("first_name").value
                    active_user["last_name"] = document.getElementById("last_name").value
                    active_user["user_email"] = document.getElementById("email").value
                    active_user["address"] = document.getElementById("address").value
                    active_user["address2"] = document.getElementById("address2").value
                    active_user["zip_code"] = document.getElementById("zip_code").value

                    document.getElementById("first_name").value = active_user["first_name"];
                    document.getElementById("last_name").value = active_user["last_name"];
                    document.getElementById("email").value = active_user["user_email"];
                    document.getElementById("address").value = active_user["address"];
                    document.getElementById("address2").value = active_user["address2"];
                    document.getElementById("zip_code").value = active_user["zip_code"];

                    localStorage.setItem("active_user", JSON.stringify(active_user))


                    e["first_name"] = active_user["first_name"]
                    e["last_name"] = active_user["last_name"]
                    e["user_email"] = active_user["user_email"]
                    e["address"] = active_user["address"]
                    e["address2"] = active_user["address2"]
                    e["zip_code"] = active_user["zip_code"]

                    localStorage.setItem("arr", JSON.stringify(users))

                    document.getElementById("first_name").disabled = true
                    document.getElementById("last_name").disabled = true
                    document.getElementById("address").disabled = true
                    document.getElementById("address2").disabled = true
                    document.getElementById("zip_code").disabled = true


                }
            })

        }

        function deleteItem() {

            let users = JSON.parse(localStorage.getItem("arr"));


            for (let i = 0; i < users.length; i++) {
                if (document.getElementById("email").value === users[i]["user_email"]) {
                    users.splice(i, 1)
                    confirm("Your account have been deleted")
                    localStorage.setItem("arr", JSON.stringify(users));

                    window.location.href = "../../pages/login/login.html";
                }
            }
        }

        function editItem() {

            document.getElementById("first_name").disabled = false
            document.getElementById("last_name").disabled = false
            document.getElementById("address").disabled = false
            document.getElementById("address2").disabled = false
            document.getElementById("zip_code").disabled = false

        }


    </script>



</body>

</html>